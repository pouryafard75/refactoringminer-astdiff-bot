<!DOCTYPE html><html lang="en"><head><meta charset="utf8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>RefactoringMiner</title><link type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"/><link type="text/css" href="../../resources/dist/vanilla.css" rel="stylesheet"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script><script type="text/javascript" src="../../resources/dist/shortcuts.js"></script><script type="text/javascript" src="../../resources/dist/vanilla.js"></script></head><body><div class="container-fluid"><div class="row"><div class="col">Generated by RefactoringMiner</div><div class="col"><div class="btn-toolbar justify-content-end"><div class="btn-group mr-2"><button class="btn btn-primary btn-sm" id="legend" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="bottom" data-bs-html="true" data-bs-content="<span class=&quot;del&quot;>&nbsp;&nbsp;</span> deleted<br><span class=&quot;add&quot;>&nbsp;&nbsp;</span> added<br><span class=&quot;mv&quot;>&nbsp;&nbsp;</span> moved<br><span class=&quot;upd&quot;>&nbsp;&nbsp;</span> updated<br><span class=&quot;mm&quot;>&nbsp;&nbsp;</span> multi-mapped<br>">Legend</button><button class="btn btn-primary btn-sm" id="shortcuts" data-bs-toggle="popover" data-bs-placement="bottom" data-bs-html="true" data-bs-content="<b>Alt + q</b> quit<br><b>Alt + l</b> list<br><b>Alt + t</b> top<br><b>Alt + b</b> bottom <br>">Shortcuts</button></div><div class="btn-group"><a class="btn btn-default btn-sm btn-primary" href="../../list">Overview</a><a class="btn btn-default btn-sm btn-primary disabled" href="../../#">Prev (0 remaining)</a><a class="btn btn-default btn-sm btn-primary disabled" href="../../#">Next (0 remaining)</a><a class="btn btn-default btn-sm btn-danger" href="../../quit">Quit</a></div></div></div></div><div class="row"><div class="col-6"><h5>servers/src/main/java/tachyon/worker/block/allocator/MaxFreeAllocator.java</h5><pre class="pre-scrollable" id="left"><span class="marker" id="mapping-1"></span><span class="token non" id="move-src-1" data-title="CompilationUnit"><span class="marker" id="mapping-2"></span><span class="token non" id="move-src-2" data-title="CompilationUnit/BlockComment">/*
 * Licensed to the University of California, Berkeley under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for additional information regarding
 * copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance with the License. You may obtain a
 * copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */</span>

<span class="marker" id="mapping-3"></span><span class="token non" id="move-src-3" data-title="CompilationUnit/PackageDeclaration">package <span class="marker" id="mapping-4"></span><span class="token non" id="move-src-4" data-title="PackageDeclaration/QualifiedName">tachyon.worker.block.allocator</span>;</span>

<span class="marker" id="mapping-5"></span><span class="token non" id="move-src-5" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-6"></span><span class="token non" id="move-src-6" data-title="ImportDeclaration/QualifiedName">java.io.IOException</span>;</span>

<span class="marker" id="mapping-7"></span><span class="token non" id="move-src-7" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-8"></span><span class="token non" id="move-src-8" data-title="ImportDeclaration/QualifiedName">com.google.common.base.Preconditions</span>;</span>

<span class="marker" id="mapping-9"></span><span class="token non" id="move-src-9" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-10"></span><span class="token non" id="move-src-10" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.BlockStoreLocation</span>;</span>
<span class="marker" id="mapping-11"></span><span class="token non" id="move-src-11" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-12"></span><span class="token non" id="move-src-12" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.BlockMetadataManager</span>;</span>
<span class="marker" id="mapping-13"></span><span class="token non" id="move-src-13" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-14"></span><span class="token non" id="move-src-14" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.meta.StorageDir</span>;</span>
<span class="marker" id="mapping-15"></span><span class="token non" id="move-src-15" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-16"></span><span class="token non" id="move-src-16" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.meta.StorageTier</span>;</span>
<span class="marker" id="mapping-17"></span><span class="token non" id="move-src-17" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-18"></span><span class="token non" id="move-src-18" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.meta.TempBlockMeta</span>;</span>

<span class="marker" id="mapping-19"></span><span class="token non" id="move-src-19" data-title="CompilationUnit/TypeDeclaration"><span class="marker" id="mapping-20"></span><span class="token non" id="move-src-20" data-title="TypeDeclaration/Javadoc">/**
 * <span class="marker" id="mapping-21"></span><span class="token non" id="move-src-21" data-title="Javadoc/TagElement"><span class="marker" id="mapping-22"></span><span class="token upd" id="move-src-22" data-title="TagElement/TextElement"><span class="cupd">An allocator that allocates a block in the storage dir with most free space.</span></span></span>
 */</span>
<span class="marker" id="mapping-23"></span><span class="token non" id="move-src-23" data-title="TypeDeclaration/Modifier">public</span> <span class="marker" id="mapping-24"></span><span class="token non" id="move-src-24" data-title="TypeDeclaration/TYPE_DECLARATION_KIND">class</span> <span class="marker" id="mapping-25"></span><span class="token non" id="move-src-25" data-title="TypeDeclaration/SimpleName">MaxFreeAllocator</span> implements <span class="marker" id="mapping-26"></span><span class="token non" id="move-src-26" data-title="TypeDeclaration/SimpleType"><span class="marker" id="mapping-27"></span><span class="token non" id="move-src-27" data-title="SimpleType/SimpleName">Allocator</span></span> {
  <span class="marker" id="mapping-28"></span><span class="token non" id="move-src-28" data-title="TypeDeclaration/FieldDeclaration"><span class="marker" id="mapping-29"></span><span class="token non" id="move-src-29" data-title="FieldDeclaration/Modifier">private</span> <span class="marker" id="mapping-30"></span><span class="token non" id="move-src-30" data-title="FieldDeclaration/Modifier">final</span> <span class="marker" id="mapping-31"></span><span class="token non" id="move-src-31" data-title="FieldDeclaration/SimpleType"><span class="marker" id="mapping-32"></span><span class="token non" id="move-src-32" data-title="SimpleType/SimpleName">BlockMetadataManager</span></span> <span class="marker" id="mapping-33"></span><span class="token non" id="move-src-33" data-title="FieldDeclaration/VariableDeclarationFragment"><span class="marker" id="mapping-34"></span><span class="token non" id="move-src-34" data-title="VariableDeclarationFragment/SimpleName">mMetaManager</span></span>;</span>

  <span class="marker" id="mapping-35"></span><span class="token non" id="move-src-35" data-title="TypeDeclaration/MethodDeclaration"><span class="marker" id="mapping-36"></span><span class="token non" id="move-src-36" data-title="MethodDeclaration/Modifier">public</span> <span class="marker" id="mapping-37"></span><span class="token non" id="move-src-37" data-title="MethodDeclaration/SimpleName">MaxFreeAllocator</span>(<span class="marker" id="mapping-38"></span><span class="token non" id="move-src-38" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-39"></span><span class="token non" id="move-src-39" data-title="SingleVariableDeclaration/SimpleType"><span class="marker" id="mapping-40"></span><span class="token non" id="move-src-40" data-title="SimpleType/SimpleName">BlockMetadataManager</span></span> <span class="marker" id="mapping-41"></span><span class="token non" id="move-src-41" data-title="SingleVariableDeclaration/SimpleName">metadata</span></span>) <span class="marker" id="mapping-42"></span><span class="token non" id="move-src-42" data-title="MethodDeclaration/Block">{
    <span class="marker" id="mapping-43"></span><span class="token non" id="move-src-43" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-44"></span><span class="token non" id="move-src-44" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-45"></span><span class="token non" id="move-src-45" data-title="Assignment/SimpleName">mMetaManager</span> <span class="marker" id="mapping-46"></span><span class="token non" id="move-src-46" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-47"></span><span class="token non" id="move-src-47" data-title="Assignment/MethodInvocation"><span class="marker" id="mapping-48"></span><span class="token non" id="move-src-48" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-49"></span><span class="token non" id="move-src-49" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">Preconditions</span></span>.<span class="marker" id="mapping-50"></span><span class="token non" id="move-src-50" data-title="MethodInvocation/SimpleName">checkNotNull</span>(<span class="marker" id="mapping-51"></span><span class="token non" id="move-src-51" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-52"></span><span class="token non" id="move-src-52" data-title="METHOD_INVOCATION_ARGUMENTS/SimpleName">metadata</span></span>)</span></span>;</span>
  }</span></span>

  <span class="marker" id="mapping-53"></span><span class="token non" id="move-src-53" data-title="TypeDeclaration/MethodDeclaration"><span class="marker" id="mapping-54"></span><span class="token non" id="move-src-54" data-title="MethodDeclaration/MarkerAnnotation">@<span class="marker" id="mapping-55"></span><span class="token non" id="move-src-55" data-title="MarkerAnnotation/SimpleName">Override</span></span>
  <span class="marker" id="mapping-56"></span><span class="token non" id="move-src-56" data-title="MethodDeclaration/Modifier">public</span> <span class="marker" id="mapping-57"></span><span class="token non" id="move-src-57" data-title="MethodDeclaration/SimpleType"><span class="marker" id="mapping-58"></span><span class="token non" id="move-src-58" data-title="SimpleType/SimpleName">TempBlockMeta</span></span> <span class="marker" id="mapping-59"></span><span class="token non" id="move-src-59" data-title="MethodDeclaration/SimpleName">allocateBlock</span>(<span class="marker" id="mapping-60"></span><span class="token non" id="move-src-60" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-61"></span><span class="token non" id="move-src-61" data-title="SingleVariableDeclaration/PrimitiveType">long</span> <span class="marker" id="mapping-62"></span><span class="token non" id="move-src-62" data-title="SingleVariableDeclaration/SimpleName">userId</span></span>, <span class="marker" id="mapping-63"></span><span class="token non" id="move-src-63" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-64"></span><span class="token non" id="move-src-64" data-title="SingleVariableDeclaration/PrimitiveType">long</span> <span class="marker" id="mapping-65"></span><span class="token non" id="move-src-65" data-title="SingleVariableDeclaration/SimpleName">blockId</span></span>, <span class="marker" id="mapping-66"></span><span class="token non" id="move-src-66" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-67"></span><span class="token non" id="move-src-67" data-title="SingleVariableDeclaration/PrimitiveType">long</span> <span class="marker" id="mapping-68"></span><span class="token non" id="move-src-68" data-title="SingleVariableDeclaration/SimpleName">blockSize</span></span>,
      <span class="marker" id="mapping-69"></span><span class="token non" id="move-src-69" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-70"></span><span class="token non" id="move-src-70" data-title="SingleVariableDeclaration/SimpleType"><span class="marker" id="mapping-71"></span><span class="token non" id="move-src-71" data-title="SimpleType/SimpleName">BlockStoreLocation</span></span> <span class="marker" id="mapping-72"></span><span class="token non" id="move-src-72" data-title="SingleVariableDeclaration/SimpleName">location</span></span>) throws <span class="marker" id="mapping-73"></span><span class="token non" id="move-src-73" data-title="MethodDeclaration/SimpleType"><span class="marker" id="mapping-74"></span><span class="token non" id="move-src-74" data-title="SimpleType/SimpleName">IOException</span></span> <span class="marker" id="mapping-75"></span><span class="token non" id="move-src-75" data-title="MethodDeclaration/Block">{

    <span class="marker" id="mapping-76"></span><span class="token non" id="move-src-76" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-77"></span><span class="token non" id="move-src-77" data-title="VariableDeclarationStatement/SimpleType"><span class="marker" id="mapping-78"></span><span class="token non" id="move-src-78" data-title="SimpleType/SimpleName">StorageDir</span></span> <span class="marker" id="mapping-79"></span><span class="token non" id="move-src-79" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-80"></span><span class="token non" id="move-src-80" data-title="VariableDeclarationFragment/SimpleName">candidateDir</span> = <span class="marker" id="mapping-81"></span><span class="token non" id="move-src-81" data-title="VariableDeclarationFragment/NullLiteral">null</span></span>;</span>
    <span class="marker" id="mapping-82"></span><span class="token mv" id="move-src-82" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-83"></span><span class="token non" id="move-src-83" data-title="VariableDeclarationStatement/PrimitiveType">long</span> <span class="marker" id="mapping-84"></span><span class="token non" id="move-src-84" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-85"></span><span class="token non" id="move-src-85" data-title="VariableDeclarationFragment/SimpleName">maxFreeBytes</span> = <span class="marker" id="mapping-86"></span><span class="token mv" id="move-src-86" data-title="VariableDeclarationFragment/SimpleName">blockSize</span></span>;</span>

    <span class="marker" id="mapping-87"></span><span class="token non" id="move-src-87" data-title="Block/IfStatement">if (<span class="marker" id="mapping-88"></span><span class="token non" id="move-src-88" data-title="IfStatement/MethodInvocation"><span class="marker" id="mapping-89"></span><span class="token non" id="move-src-89" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-90"></span><span class="token non" id="move-src-90" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-91"></span><span class="token non" id="move-src-91" data-title="MethodInvocation/SimpleName">equals</span>(<span class="marker" id="mapping-92"></span><span class="token non" id="move-src-92" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-93"></span><span class="token non" id="move-src-93" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-94"></span><span class="token non" id="move-src-94" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-95"></span><span class="token non" id="move-src-95" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">BlockStoreLocation</span></span>.<span class="marker" id="mapping-96"></span><span class="token non" id="move-src-96" data-title="MethodInvocation/SimpleName">anyTier</span>()</span></span>)</span>) <span class="marker" id="mapping-97"></span><span class="token non" id="move-src-97" data-title="IfStatement/Block">{
      <span class="marker" id="mapping-98"></span><span class="token non" id="move-src-98" data-title="Block/EnhancedForStatement">for (<span class="marker" id="mapping-99"></span><span class="token non" id="move-src-99" data-title="EnhancedForStatement/SingleVariableDeclaration"><span class="marker" id="mapping-100"></span><span class="token non" id="move-src-100" data-title="SingleVariableDeclaration/SimpleType"><span class="marker" id="mapping-101"></span><span class="token non" id="move-src-101" data-title="SimpleType/SimpleName">StorageTier</span></span> <span class="marker" id="mapping-102"></span><span class="token non" id="move-src-102" data-title="SingleVariableDeclaration/SimpleName">tier</span></span> : <span class="marker" id="mapping-103"></span><span class="token non" id="move-src-103" data-title="EnhancedForStatement/MethodInvocation"><span class="marker" id="mapping-104"></span><span class="token non" id="move-src-104" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-105"></span><span class="token non" id="move-src-105" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">mMetaManager</span></span>.<span class="marker" id="mapping-106"></span><span class="token non" id="move-src-106" data-title="MethodInvocation/SimpleName">getTiers</span>()</span>) <span class="marker" id="mapping-107"></span><span class="token non" id="move-src-107" data-title="EnhancedForStatement/Block">{
        <span class="marker" id="mapping-108"></span><span class="token mm" gid="c" data-title="Block/EnhancedForStatement">for (<span class="marker" id="mapping-109"></span><span class="token non" id="move-src-108" data-title="EnhancedForStatement/SingleVariableDeclaration"><span class="marker" id="mapping-110"></span><span class="token non" id="move-src-109" data-title="SingleVariableDeclaration/SimpleType"><span class="marker" id="mapping-111"></span><span class="token non" id="move-src-110" data-title="SimpleType/SimpleName">StorageDir</span></span> <span class="marker" id="mapping-112"></span><span class="token non" id="move-src-111" data-title="SingleVariableDeclaration/SimpleName">dir</span></span> : <span class="marker" id="mapping-113"></span><span class="token non" id="move-src-112" data-title="EnhancedForStatement/MethodInvocation"><span class="marker" id="mapping-114"></span><span class="token non" id="move-src-113" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-115"></span><span class="token non" id="move-src-114" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">tier</span></span>.<span class="marker" id="mapping-116"></span><span class="token non" id="move-src-115" data-title="MethodInvocation/SimpleName">getStorageDirs</span>()</span>) <span class="marker" id="mapping-117"></span><span class="token non" id="move-src-116" data-title="EnhancedForStatement/Block">{
          <span class="marker" id="mapping-118"></span><span class="token non" id="move-src-117" data-title="Block/IfStatement">if (<span class="marker" id="mapping-119"></span><span class="token non" id="move-src-118" data-title="IfStatement/InfixExpression"><span class="marker" id="mapping-120"></span><span class="token non" id="move-src-119" data-title="InfixExpression/MethodInvocation"><span class="marker" id="mapping-121"></span><span class="token non" id="move-src-120" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-122"></span><span class="token non" id="move-src-121" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">dir</span></span>.<span class="marker" id="mapping-123"></span><span class="token non" id="move-src-122" data-title="MethodInvocation/SimpleName">getAvailableBytes</span>()</span> <span class="marker" id="mapping-124"></span><span class="token mm updOnTop" gid="6" data-title="InfixExpression/INFIX_EXPRESSION_OPERATOR">&gt;=</span> <span class="marker" id="mapping-125"></span><span class="token non" id="move-src-123" data-title="InfixExpression/SimpleName">maxFreeBytes</span></span>) <span class="marker" id="mapping-126"></span><span class="token non" id="move-src-124" data-title="IfStatement/Block">{
            <span class="marker" id="mapping-127"></span><span class="token non" id="move-src-125" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-128"></span><span class="token non" id="move-src-126" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-129"></span><span class="token non" id="move-src-127" data-title="Assignment/SimpleName">maxFreeBytes</span> <span class="marker" id="mapping-130"></span><span class="token non" id="move-src-128" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-131"></span><span class="token non" id="move-src-129" data-title="Assignment/MethodInvocation"><span class="marker" id="mapping-132"></span><span class="token non" id="move-src-130" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-133"></span><span class="token non" id="move-src-131" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">dir</span></span>.<span class="marker" id="mapping-134"></span><span class="token non" id="move-src-132" data-title="MethodInvocation/SimpleName">getAvailableBytes</span>()</span></span>;</span>
            <span class="marker" id="mapping-135"></span><span class="token non" id="move-src-133" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-136"></span><span class="token non" id="move-src-134" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-137"></span><span class="token non" id="move-src-135" data-title="Assignment/SimpleName">candidateDir</span> <span class="marker" id="mapping-138"></span><span class="token non" id="move-src-136" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-139"></span><span class="token non" id="move-src-137" data-title="Assignment/SimpleName">dir</span></span>;</span>
          }</span></span>
        }</span></span>
      }</span></span>
    }</span> else <span class="marker" id="mapping-140"></span><span class="token non" id="move-src-138" data-title="IfStatement/IfStatement">if (<span class="marker" id="mapping-141"></span><span class="token non" id="move-src-139" data-title="IfStatement/MethodInvocation"><span class="marker" id="mapping-142"></span><span class="token non" id="move-src-140" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-143"></span><span class="token non" id="move-src-141" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-144"></span><span class="token non" id="move-src-142" data-title="MethodInvocation/SimpleName">equals</span>(<span class="marker" id="mapping-145"></span><span class="token non" id="move-src-143" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-146"></span><span class="token non" id="move-src-144" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-147"></span><span class="token non" id="move-src-145" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-148"></span><span class="token non" id="move-src-146" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">BlockStoreLocation</span></span>.<span class="marker" id="mapping-149"></span><span class="token non" id="move-src-147" data-title="MethodInvocation/SimpleName">anyDirInTier</span>(<span class="marker" id="mapping-150"></span><span class="token non" id="move-src-148" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-151"></span><span class="token non" id="move-src-149" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-152"></span><span class="token non" id="move-src-150" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-153"></span><span class="token non" id="move-src-151" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-154"></span><span class="token non" id="move-src-152" data-title="MethodInvocation/SimpleName">tierAlias</span>()</span></span>)</span></span>)</span>) <span class="marker" id="mapping-155"></span><span class="token non" id="move-src-153" data-title="IfStatement/Block">{
      <span class="marker" id="mapping-156"></span><span class="token non" id="move-src-154" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-157"></span><span class="token non" id="move-src-155" data-title="VariableDeclarationStatement/SimpleType"><span class="marker" id="mapping-158"></span><span class="token non" id="move-src-156" data-title="SimpleType/SimpleName">StorageTier</span></span> <span class="marker" id="mapping-159"></span><span class="token non" id="move-src-157" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-160"></span><span class="token non" id="move-src-158" data-title="VariableDeclarationFragment/SimpleName">tier</span> = <span class="marker" id="mapping-161"></span><span class="token non" id="move-src-159" data-title="VariableDeclarationFragment/MethodInvocation"><span class="marker" id="mapping-162"></span><span class="token non" id="move-src-160" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-163"></span><span class="token non" id="move-src-161" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">mMetaManager</span></span>.<span class="marker" id="mapping-164"></span><span class="token non" id="move-src-162" data-title="MethodInvocation/SimpleName">getTier</span>(<span class="marker" id="mapping-165"></span><span class="token non" id="move-src-163" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-166"></span><span class="token non" id="move-src-164" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-167"></span><span class="token non" id="move-src-165" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-168"></span><span class="token non" id="move-src-166" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-169"></span><span class="token non" id="move-src-167" data-title="MethodInvocation/SimpleName">tierAlias</span>()</span></span>)</span></span>;</span>
      <span class="marker" id="mapping-170"></span><span class="token mm" gid="c" data-title="Block/EnhancedForStatement">for (<span class="marker" id="mapping-171"></span><span class="token non" id="move-src-168" data-title="EnhancedForStatement/SingleVariableDeclaration"><span class="marker" id="mapping-172"></span><span class="token non" id="move-src-169" data-title="SingleVariableDeclaration/SimpleType"><span class="marker" id="mapping-173"></span><span class="token non" id="move-src-170" data-title="SimpleType/SimpleName">StorageDir</span></span> <span class="marker" id="mapping-174"></span><span class="token non" id="move-src-171" data-title="SingleVariableDeclaration/SimpleName">dir</span></span> : <span class="marker" id="mapping-175"></span><span class="token non" id="move-src-172" data-title="EnhancedForStatement/MethodInvocation"><span class="marker" id="mapping-176"></span><span class="token non" id="move-src-173" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-177"></span><span class="token non" id="move-src-174" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">tier</span></span>.<span class="marker" id="mapping-178"></span><span class="token non" id="move-src-175" data-title="MethodInvocation/SimpleName">getStorageDirs</span>()</span>) <span class="marker" id="mapping-179"></span><span class="token non" id="move-src-176" data-title="EnhancedForStatement/Block">{
        <span class="marker" id="mapping-180"></span><span class="token non" id="move-src-177" data-title="Block/IfStatement">if (<span class="marker" id="mapping-181"></span><span class="token non" id="move-src-178" data-title="IfStatement/InfixExpression"><span class="marker" id="mapping-182"></span><span class="token non" id="move-src-179" data-title="InfixExpression/MethodInvocation"><span class="marker" id="mapping-183"></span><span class="token non" id="move-src-180" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-184"></span><span class="token non" id="move-src-181" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">dir</span></span>.<span class="marker" id="mapping-185"></span><span class="token non" id="move-src-182" data-title="MethodInvocation/SimpleName">getAvailableBytes</span>()</span> <span class="marker" id="mapping-186"></span><span class="token mm updOnTop" gid="6" data-title="InfixExpression/INFIX_EXPRESSION_OPERATOR">&gt;=</span> <span class="marker" id="mapping-187"></span><span class="token non" id="move-src-183" data-title="InfixExpression/SimpleName">maxFreeBytes</span></span>) <span class="marker" id="mapping-188"></span><span class="token non" id="move-src-184" data-title="IfStatement/Block">{
          <span class="marker" id="mapping-189"></span><span class="token non" id="move-src-185" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-190"></span><span class="token non" id="move-src-186" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-191"></span><span class="token non" id="move-src-187" data-title="Assignment/SimpleName">maxFreeBytes</span> <span class="marker" id="mapping-192"></span><span class="token non" id="move-src-188" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-193"></span><span class="token non" id="move-src-189" data-title="Assignment/MethodInvocation"><span class="marker" id="mapping-194"></span><span class="token non" id="move-src-190" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-195"></span><span class="token non" id="move-src-191" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">dir</span></span>.<span class="marker" id="mapping-196"></span><span class="token non" id="move-src-192" data-title="MethodInvocation/SimpleName">getAvailableBytes</span>()</span></span>;</span>
          <span class="marker" id="mapping-197"></span><span class="token non" id="move-src-193" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-198"></span><span class="token non" id="move-src-194" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-199"></span><span class="token non" id="move-src-195" data-title="Assignment/SimpleName">candidateDir</span> <span class="marker" id="mapping-200"></span><span class="token non" id="move-src-196" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-201"></span><span class="token non" id="move-src-197" data-title="Assignment/SimpleName">dir</span></span>;</span>
        }</span></span>
      }</span></span>
    }</span> else <span class="marker" id="mapping-202"></span><span class="token non" id="move-src-198" data-title="IfStatement/Block">{
      <span class="marker" id="mapping-203"></span><span class="token non" id="move-src-199" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-204"></span><span class="token non" id="move-src-200" data-title="VariableDeclarationStatement/SimpleType"><span class="marker" id="mapping-205"></span><span class="token non" id="move-src-201" data-title="SimpleType/SimpleName">StorageTier</span></span> <span class="marker" id="mapping-206"></span><span class="token non" id="move-src-202" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-207"></span><span class="token non" id="move-src-203" data-title="VariableDeclarationFragment/SimpleName">tier</span> = <span class="marker" id="mapping-208"></span><span class="token non" id="move-src-204" data-title="VariableDeclarationFragment/MethodInvocation"><span class="marker" id="mapping-209"></span><span class="token non" id="move-src-205" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-210"></span><span class="token non" id="move-src-206" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">mMetaManager</span></span>.<span class="marker" id="mapping-211"></span><span class="token non" id="move-src-207" data-title="MethodInvocation/SimpleName">getTier</span>(<span class="marker" id="mapping-212"></span><span class="token non" id="move-src-208" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-213"></span><span class="token non" id="move-src-209" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-214"></span><span class="token non" id="move-src-210" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-215"></span><span class="token non" id="move-src-211" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-216"></span><span class="token non" id="move-src-212" data-title="MethodInvocation/SimpleName">tierAlias</span>()</span></span>)</span></span>;</span>
      <span class="marker" id="mapping-217"></span><span class="token non" id="move-src-213" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-218"></span><span class="token non" id="move-src-214" data-title="VariableDeclarationStatement/SimpleType"><span class="marker" id="mapping-219"></span><span class="token non" id="move-src-215" data-title="SimpleType/SimpleName">StorageDir</span></span> <span class="marker" id="mapping-220"></span><span class="token non" id="move-src-216" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-221"></span><span class="token non" id="move-src-217" data-title="VariableDeclarationFragment/SimpleName">dir</span> = <span class="marker" id="mapping-222"></span><span class="token non" id="move-src-218" data-title="VariableDeclarationFragment/MethodInvocation"><span class="marker" id="mapping-223"></span><span class="token non" id="move-src-219" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-224"></span><span class="token non" id="move-src-220" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">tier</span></span>.<span class="marker" id="mapping-225"></span><span class="token non" id="move-src-221" data-title="MethodInvocation/SimpleName">getDir</span>(<span class="marker" id="mapping-226"></span><span class="token non" id="move-src-222" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-227"></span><span class="token non" id="move-src-223" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-228"></span><span class="token non" id="move-src-224" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-229"></span><span class="token non" id="move-src-225" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-230"></span><span class="token non" id="move-src-226" data-title="MethodInvocation/SimpleName">dir</span>()</span></span>)</span></span>;</span>
      <span class="marker" id="mapping-231"></span><span class="token non" id="move-src-227" data-title="Block/IfStatement">if (<span class="marker" id="mapping-232"></span><span class="token non" id="move-src-228" data-title="IfStatement/InfixExpression"><span class="marker" id="mapping-233"></span><span class="token non" id="move-src-229" data-title="InfixExpression/MethodInvocation"><span class="marker" id="mapping-234"></span><span class="token non" id="move-src-230" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-235"></span><span class="token non" id="move-src-231" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">dir</span></span>.<span class="marker" id="mapping-236"></span><span class="token non" id="move-src-232" data-title="MethodInvocation/SimpleName">getAvailableBytes</span>()</span> <span class="marker" id="mapping-237"></span><span class="token non" id="move-src-233" data-title="InfixExpression/INFIX_EXPRESSION_OPERATOR">&gt;=</span> <span class="marker" id="mapping-238"></span><span class="token non" id="move-src-234" data-title="InfixExpression/SimpleName">blockSize</span></span>) <span class="marker" id="mapping-239"></span><span class="token non" id="move-src-235" data-title="IfStatement/Block">{
        <span class="marker" id="mapping-240"></span><span class="token non" id="move-src-236" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-241"></span><span class="token non" id="move-src-237" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-242"></span><span class="token non" id="move-src-238" data-title="Assignment/SimpleName">candidateDir</span> <span class="marker" id="mapping-243"></span><span class="token non" id="move-src-239" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-244"></span><span class="token non" id="move-src-240" data-title="Assignment/SimpleName">dir</span></span>;</span>
      }</span></span>
    }</span></span></span>

    <span class="marker" id="mapping-245"></span><span class="token non" id="move-src-241" data-title="Block/ReturnStatement">return <span class="marker" id="mapping-246"></span><span class="token non" id="move-src-242" data-title="ReturnStatement/ConditionalExpression"><span class="marker" id="mapping-247"></span><span class="token non" id="move-src-243" data-title="ConditionalExpression/InfixExpression"><span class="marker" id="mapping-248"></span><span class="token non" id="move-src-244" data-title="InfixExpression/SimpleName">candidateDir</span> <span class="marker" id="mapping-249"></span><span class="token non" id="move-src-245" data-title="InfixExpression/INFIX_EXPRESSION_OPERATOR">!=</span> <span class="marker" id="mapping-250"></span><span class="token non" id="move-src-246" data-title="InfixExpression/NullLiteral">null</span></span> ? <span class="marker" id="mapping-251"></span><span class="token non" id="move-src-247" data-title="ConditionalExpression/ClassInstanceCreation">new <span class="marker" id="mapping-252"></span><span class="token non" id="move-src-248" data-title="ClassInstanceCreation/SimpleType"><span class="marker" id="mapping-253"></span><span class="token non" id="move-src-249" data-title="SimpleType/SimpleName">TempBlockMeta</span></span>(<span class="marker" id="mapping-254"></span><span class="token non" id="move-src-250" data-title="ClassInstanceCreation/SimpleName">userId</span>, <span class="marker" id="mapping-255"></span><span class="token non" id="move-src-251" data-title="ClassInstanceCreation/SimpleName">blockId</span>, <span class="marker" id="mapping-256"></span><span class="token non" id="move-src-252" data-title="ClassInstanceCreation/SimpleName">blockSize</span>, <span class="marker" id="mapping-257"></span><span class="token non" id="move-src-253" data-title="ClassInstanceCreation/SimpleName">candidateDir</span>)</span>
        : <span class="marker" id="mapping-258"></span><span class="token non" id="move-src-254" data-title="ConditionalExpression/NullLiteral">null</span></span>;</span>
  }</span></span>
}</span>
</span></pre></div><div class="col-6"><h5>servers/src/main/java/tachyon/worker/block/allocator/MaxFreeAllocator.java</h5><pre class="pre-scrollable" id="right"><span class="marker" id="mapping-259"></span><span class="token non" id="move-dst-1" data-title="CompilationUnit"><span class="marker" id="mapping-260"></span><span class="token non" id="move-dst-2" data-title="CompilationUnit/BlockComment">/*
 * Licensed to the University of California, Berkeley under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for additional information regarding
 * copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance with the License. You may obtain a
 * copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */</span>

<span class="marker" id="mapping-261"></span><span class="token non" id="move-dst-3" data-title="CompilationUnit/PackageDeclaration">package <span class="marker" id="mapping-262"></span><span class="token non" id="move-dst-4" data-title="PackageDeclaration/QualifiedName">tachyon.worker.block.allocator</span>;</span>

<span class="marker" id="mapping-263"></span><span class="token non" id="move-dst-5" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-264"></span><span class="token non" id="move-dst-6" data-title="ImportDeclaration/QualifiedName">java.io.IOException</span>;</span>

<span class="marker" id="mapping-265"></span><span class="token non" id="move-dst-7" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-266"></span><span class="token non" id="move-dst-8" data-title="ImportDeclaration/QualifiedName">com.google.common.base.Preconditions</span>;</span>

<span class="marker" id="mapping-267"></span><span class="token non" id="move-dst-9" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-268"></span><span class="token non" id="move-dst-10" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.BlockStoreLocation</span>;</span>
<span class="marker" id="mapping-269"></span><span class="token non" id="move-dst-11" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-270"></span><span class="token non" id="move-dst-12" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.BlockMetadataManager</span>;</span>
<span class="marker" id="mapping-271"></span><span class="token non" id="move-dst-13" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-272"></span><span class="token non" id="move-dst-14" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.meta.StorageDir</span>;</span>
<span class="marker" id="mapping-273"></span><span class="token non" id="move-dst-15" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-274"></span><span class="token non" id="move-dst-16" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.meta.StorageTier</span>;</span>
<span class="marker" id="mapping-275"></span><span class="token non" id="move-dst-17" data-title="CompilationUnit/ImportDeclaration">import <span class="marker" id="mapping-276"></span><span class="token non" id="move-dst-18" data-title="ImportDeclaration/QualifiedName">tachyon.worker.block.meta.TempBlockMeta</span>;</span>

<span class="marker" id="mapping-277"></span><span class="token non" id="move-dst-19" data-title="CompilationUnit/TypeDeclaration"><span class="marker" id="mapping-278"></span><span class="token non" id="move-dst-20" data-title="TypeDeclaration/Javadoc">/**
 * <span class="marker" id="mapping-279"></span><span class="token non" id="move-dst-21" data-title="Javadoc/TagElement"><span class="marker" id="mapping-280"></span><span class="token upd" id="move-dst-22" data-title="TagElement/TextElement"><span class="cupd">An allocator that allocates a block in the storage dir with most free space.</span> It always allocates</span>
 * <span class="marker" id="mapping-281"></span><span class="token add" data-title="TagElement/TextElement">to the highest tier if the requested block store location is any tier.</span></span>
 */</span>
<span class="marker" id="mapping-282"></span><span class="token non" id="move-dst-23" data-title="TypeDeclaration/Modifier">public</span> <span class="marker" id="mapping-283"></span><span class="token non" id="move-dst-24" data-title="TypeDeclaration/TYPE_DECLARATION_KIND">class</span> <span class="marker" id="mapping-284"></span><span class="token non" id="move-dst-25" data-title="TypeDeclaration/SimpleName">MaxFreeAllocator</span> implements <span class="marker" id="mapping-285"></span><span class="token non" id="move-dst-26" data-title="TypeDeclaration/SimpleType"><span class="marker" id="mapping-286"></span><span class="token non" id="move-dst-27" data-title="SimpleType/SimpleName">Allocator</span></span> {
  <span class="marker" id="mapping-287"></span><span class="token non" id="move-dst-28" data-title="TypeDeclaration/FieldDeclaration"><span class="marker" id="mapping-288"></span><span class="token non" id="move-dst-29" data-title="FieldDeclaration/Modifier">private</span> <span class="marker" id="mapping-289"></span><span class="token non" id="move-dst-30" data-title="FieldDeclaration/Modifier">final</span> <span class="marker" id="mapping-290"></span><span class="token non" id="move-dst-31" data-title="FieldDeclaration/SimpleType"><span class="marker" id="mapping-291"></span><span class="token non" id="move-dst-32" data-title="SimpleType/SimpleName">BlockMetadataManager</span></span> <span class="marker" id="mapping-292"></span><span class="token non" id="move-dst-33" data-title="FieldDeclaration/VariableDeclarationFragment"><span class="marker" id="mapping-293"></span><span class="token non" id="move-dst-34" data-title="VariableDeclarationFragment/SimpleName">mMetaManager</span></span>;</span>

  <span class="marker" id="mapping-294"></span><span class="token non" id="move-dst-35" data-title="TypeDeclaration/MethodDeclaration"><span class="marker" id="mapping-295"></span><span class="token non" id="move-dst-36" data-title="MethodDeclaration/Modifier">public</span> <span class="marker" id="mapping-296"></span><span class="token non" id="move-dst-37" data-title="MethodDeclaration/SimpleName">MaxFreeAllocator</span>(<span class="marker" id="mapping-297"></span><span class="token non" id="move-dst-38" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-298"></span><span class="token non" id="move-dst-39" data-title="SingleVariableDeclaration/SimpleType"><span class="marker" id="mapping-299"></span><span class="token non" id="move-dst-40" data-title="SimpleType/SimpleName">BlockMetadataManager</span></span> <span class="marker" id="mapping-300"></span><span class="token non" id="move-dst-41" data-title="SingleVariableDeclaration/SimpleName">metadata</span></span>) <span class="marker" id="mapping-301"></span><span class="token non" id="move-dst-42" data-title="MethodDeclaration/Block">{
    <span class="marker" id="mapping-302"></span><span class="token non" id="move-dst-43" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-303"></span><span class="token non" id="move-dst-44" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-304"></span><span class="token non" id="move-dst-45" data-title="Assignment/SimpleName">mMetaManager</span> <span class="marker" id="mapping-305"></span><span class="token non" id="move-dst-46" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-306"></span><span class="token non" id="move-dst-47" data-title="Assignment/MethodInvocation"><span class="marker" id="mapping-307"></span><span class="token non" id="move-dst-48" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-308"></span><span class="token non" id="move-dst-49" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">Preconditions</span></span>.<span class="marker" id="mapping-309"></span><span class="token non" id="move-dst-50" data-title="MethodInvocation/SimpleName">checkNotNull</span>(<span class="marker" id="mapping-310"></span><span class="token non" id="move-dst-51" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-311"></span><span class="token non" id="move-dst-52" data-title="METHOD_INVOCATION_ARGUMENTS/SimpleName">metadata</span></span>)</span></span>;</span>
  }</span></span>

  <span class="marker" id="mapping-312"></span><span class="token non" id="move-dst-53" data-title="TypeDeclaration/MethodDeclaration"><span class="marker" id="mapping-313"></span><span class="token non" id="move-dst-54" data-title="MethodDeclaration/MarkerAnnotation">@<span class="marker" id="mapping-314"></span><span class="token non" id="move-dst-55" data-title="MarkerAnnotation/SimpleName">Override</span></span>
  <span class="marker" id="mapping-315"></span><span class="token non" id="move-dst-56" data-title="MethodDeclaration/Modifier">public</span> <span class="marker" id="mapping-316"></span><span class="token non" id="move-dst-57" data-title="MethodDeclaration/SimpleType"><span class="marker" id="mapping-317"></span><span class="token non" id="move-dst-58" data-title="SimpleType/SimpleName">TempBlockMeta</span></span> <span class="marker" id="mapping-318"></span><span class="token non" id="move-dst-59" data-title="MethodDeclaration/SimpleName">allocateBlock</span>(<span class="marker" id="mapping-319"></span><span class="token non" id="move-dst-60" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-320"></span><span class="token non" id="move-dst-61" data-title="SingleVariableDeclaration/PrimitiveType">long</span> <span class="marker" id="mapping-321"></span><span class="token non" id="move-dst-62" data-title="SingleVariableDeclaration/SimpleName">userId</span></span>, <span class="marker" id="mapping-322"></span><span class="token non" id="move-dst-63" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-323"></span><span class="token non" id="move-dst-64" data-title="SingleVariableDeclaration/PrimitiveType">long</span> <span class="marker" id="mapping-324"></span><span class="token non" id="move-dst-65" data-title="SingleVariableDeclaration/SimpleName">blockId</span></span>, <span class="marker" id="mapping-325"></span><span class="token non" id="move-dst-66" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-326"></span><span class="token non" id="move-dst-67" data-title="SingleVariableDeclaration/PrimitiveType">long</span> <span class="marker" id="mapping-327"></span><span class="token non" id="move-dst-68" data-title="SingleVariableDeclaration/SimpleName">blockSize</span></span>,
      <span class="marker" id="mapping-328"></span><span class="token non" id="move-dst-69" data-title="MethodDeclaration/SingleVariableDeclaration"><span class="marker" id="mapping-329"></span><span class="token non" id="move-dst-70" data-title="SingleVariableDeclaration/SimpleType"><span class="marker" id="mapping-330"></span><span class="token non" id="move-dst-71" data-title="SimpleType/SimpleName">BlockStoreLocation</span></span> <span class="marker" id="mapping-331"></span><span class="token non" id="move-dst-72" data-title="SingleVariableDeclaration/SimpleName">location</span></span>) throws <span class="marker" id="mapping-332"></span><span class="token non" id="move-dst-73" data-title="MethodDeclaration/SimpleType"><span class="marker" id="mapping-333"></span><span class="token non" id="move-dst-74" data-title="SimpleType/SimpleName">IOException</span></span> <span class="marker" id="mapping-334"></span><span class="token non" id="move-dst-75" data-title="MethodDeclaration/Block">{
    <span class="marker" id="mapping-335"></span><span class="token non" id="move-dst-76" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-336"></span><span class="token non" id="move-dst-77" data-title="VariableDeclarationStatement/SimpleType"><span class="marker" id="mapping-337"></span><span class="token non" id="move-dst-78" data-title="SimpleType/SimpleName">StorageDir</span></span> <span class="marker" id="mapping-338"></span><span class="token non" id="move-dst-79" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-339"></span><span class="token non" id="move-dst-80" data-title="VariableDeclarationFragment/SimpleName">candidateDir</span> = <span class="marker" id="mapping-340"></span><span class="token non" id="move-dst-81" data-title="VariableDeclarationFragment/NullLiteral">null</span></span>;</span>

    <span class="marker" id="mapping-341"></span><span class="token non" id="move-dst-87" data-title="Block/IfStatement">if (<span class="marker" id="mapping-342"></span><span class="token non" id="move-dst-88" data-title="IfStatement/MethodInvocation"><span class="marker" id="mapping-343"></span><span class="token non" id="move-dst-89" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-344"></span><span class="token non" id="move-dst-90" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-345"></span><span class="token non" id="move-dst-91" data-title="MethodInvocation/SimpleName">equals</span>(<span class="marker" id="mapping-346"></span><span class="token non" id="move-dst-92" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-347"></span><span class="token non" id="move-dst-93" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-348"></span><span class="token non" id="move-dst-94" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-349"></span><span class="token non" id="move-dst-95" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">BlockStoreLocation</span></span>.<span class="marker" id="mapping-350"></span><span class="token non" id="move-dst-96" data-title="MethodInvocation/SimpleName">anyTier</span>()</span></span>)</span>) <span class="marker" id="mapping-351"></span><span class="token non" id="move-dst-97" data-title="IfStatement/Block">{
      <span class="marker" id="mapping-352"></span><span class="token non" id="move-dst-98" data-title="Block/EnhancedForStatement">for (<span class="marker" id="mapping-353"></span><span class="token non" id="move-dst-99" data-title="EnhancedForStatement/SingleVariableDeclaration"><span class="marker" id="mapping-354"></span><span class="token non" id="move-dst-100" data-title="SingleVariableDeclaration/SimpleType"><span class="marker" id="mapping-355"></span><span class="token non" id="move-dst-101" data-title="SimpleType/SimpleName">StorageTier</span></span> <span class="marker" id="mapping-356"></span><span class="token non" id="move-dst-102" data-title="SingleVariableDeclaration/SimpleName">tier</span></span> : <span class="marker" id="mapping-357"></span><span class="token non" id="move-dst-103" data-title="EnhancedForStatement/MethodInvocation"><span class="marker" id="mapping-358"></span><span class="token non" id="move-dst-104" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-359"></span><span class="token non" id="move-dst-105" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">mMetaManager</span></span>.<span class="marker" id="mapping-360"></span><span class="token non" id="move-dst-106" data-title="MethodInvocation/SimpleName">getTiers</span>()</span>) <span class="marker" id="mapping-361"></span><span class="token non" id="move-dst-107" data-title="EnhancedForStatement/Block">{
        <span class="marker" id="mapping-362"></span><span class="token add" data-title="Block/ExpressionStatement">candidateDir = getCandidateDirInTier(tier, blockSize);</span>
        <span class="marker" id="mapping-363"></span><span class="token add" data-title="Block/IfStatement">if (candidateDir != null) {
          return new TempBlockMeta(userId, blockId, blockSize, candidateDir);
        }</span>
      }</span></span>
    }</span> else <span class="marker" id="mapping-364"></span><span class="token non" id="move-dst-138" data-title="IfStatement/IfStatement">if (<span class="marker" id="mapping-365"></span><span class="token non" id="move-dst-139" data-title="IfStatement/MethodInvocation"><span class="marker" id="mapping-366"></span><span class="token non" id="move-dst-140" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-367"></span><span class="token non" id="move-dst-141" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-368"></span><span class="token non" id="move-dst-142" data-title="MethodInvocation/SimpleName">equals</span>(<span class="marker" id="mapping-369"></span><span class="token non" id="move-dst-143" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-370"></span><span class="token non" id="move-dst-144" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-371"></span><span class="token non" id="move-dst-145" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-372"></span><span class="token non" id="move-dst-146" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">BlockStoreLocation</span></span>.<span class="marker" id="mapping-373"></span><span class="token non" id="move-dst-147" data-title="MethodInvocation/SimpleName">anyDirInTier</span>(<span class="marker" id="mapping-374"></span><span class="token non" id="move-dst-148" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-375"></span><span class="token non" id="move-dst-149" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-376"></span><span class="token non" id="move-dst-150" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-377"></span><span class="token non" id="move-dst-151" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-378"></span><span class="token non" id="move-dst-152" data-title="MethodInvocation/SimpleName">tierAlias</span>()</span></span>)</span></span>)</span>) <span class="marker" id="mapping-379"></span><span class="token non" id="move-dst-153" data-title="IfStatement/Block">{
      <span class="marker" id="mapping-380"></span><span class="token non" id="move-dst-154" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-381"></span><span class="token non" id="move-dst-155" data-title="VariableDeclarationStatement/SimpleType"><span class="marker" id="mapping-382"></span><span class="token non" id="move-dst-156" data-title="SimpleType/SimpleName">StorageTier</span></span> <span class="marker" id="mapping-383"></span><span class="token non" id="move-dst-157" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-384"></span><span class="token non" id="move-dst-158" data-title="VariableDeclarationFragment/SimpleName">tier</span> = <span class="marker" id="mapping-385"></span><span class="token non" id="move-dst-159" data-title="VariableDeclarationFragment/MethodInvocation"><span class="marker" id="mapping-386"></span><span class="token non" id="move-dst-160" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-387"></span><span class="token non" id="move-dst-161" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">mMetaManager</span></span>.<span class="marker" id="mapping-388"></span><span class="token non" id="move-dst-162" data-title="MethodInvocation/SimpleName">getTier</span>(<span class="marker" id="mapping-389"></span><span class="token non" id="move-dst-163" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-390"></span><span class="token non" id="move-dst-164" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-391"></span><span class="token non" id="move-dst-165" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-392"></span><span class="token non" id="move-dst-166" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-393"></span><span class="token non" id="move-dst-167" data-title="MethodInvocation/SimpleName">tierAlias</span>()</span></span>)</span></span>;</span>
      <span class="marker" id="mapping-394"></span><span class="token add" data-title="Block/ExpressionStatement">candidateDir = getCandidateDirInTier(tier, blockSize);</span>
    }</span> else <span class="marker" id="mapping-395"></span><span class="token non" id="move-dst-198" data-title="IfStatement/Block">{
      <span class="marker" id="mapping-396"></span><span class="token non" id="move-dst-199" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-397"></span><span class="token non" id="move-dst-200" data-title="VariableDeclarationStatement/SimpleType"><span class="marker" id="mapping-398"></span><span class="token non" id="move-dst-201" data-title="SimpleType/SimpleName">StorageTier</span></span> <span class="marker" id="mapping-399"></span><span class="token non" id="move-dst-202" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-400"></span><span class="token non" id="move-dst-203" data-title="VariableDeclarationFragment/SimpleName">tier</span> = <span class="marker" id="mapping-401"></span><span class="token non" id="move-dst-204" data-title="VariableDeclarationFragment/MethodInvocation"><span class="marker" id="mapping-402"></span><span class="token non" id="move-dst-205" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-403"></span><span class="token non" id="move-dst-206" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">mMetaManager</span></span>.<span class="marker" id="mapping-404"></span><span class="token non" id="move-dst-207" data-title="MethodInvocation/SimpleName">getTier</span>(<span class="marker" id="mapping-405"></span><span class="token non" id="move-dst-208" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-406"></span><span class="token non" id="move-dst-209" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-407"></span><span class="token non" id="move-dst-210" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-408"></span><span class="token non" id="move-dst-211" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-409"></span><span class="token non" id="move-dst-212" data-title="MethodInvocation/SimpleName">tierAlias</span>()</span></span>)</span></span>;</span>
      <span class="marker" id="mapping-410"></span><span class="token non" id="move-dst-213" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-411"></span><span class="token non" id="move-dst-214" data-title="VariableDeclarationStatement/SimpleType"><span class="marker" id="mapping-412"></span><span class="token non" id="move-dst-215" data-title="SimpleType/SimpleName">StorageDir</span></span> <span class="marker" id="mapping-413"></span><span class="token non" id="move-dst-216" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-414"></span><span class="token non" id="move-dst-217" data-title="VariableDeclarationFragment/SimpleName">dir</span> = <span class="marker" id="mapping-415"></span><span class="token non" id="move-dst-218" data-title="VariableDeclarationFragment/MethodInvocation"><span class="marker" id="mapping-416"></span><span class="token non" id="move-dst-219" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-417"></span><span class="token non" id="move-dst-220" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">tier</span></span>.<span class="marker" id="mapping-418"></span><span class="token non" id="move-dst-221" data-title="MethodInvocation/SimpleName">getDir</span>(<span class="marker" id="mapping-419"></span><span class="token non" id="move-dst-222" data-title="MethodInvocation/METHOD_INVOCATION_ARGUMENTS"><span class="marker" id="mapping-420"></span><span class="token non" id="move-dst-223" data-title="METHOD_INVOCATION_ARGUMENTS/MethodInvocation"><span class="marker" id="mapping-421"></span><span class="token non" id="move-dst-224" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-422"></span><span class="token non" id="move-dst-225" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">location</span></span>.<span class="marker" id="mapping-423"></span><span class="token non" id="move-dst-226" data-title="MethodInvocation/SimpleName">dir</span>()</span></span>)</span></span>;</span>
      <span class="marker" id="mapping-424"></span><span class="token non" id="move-dst-227" data-title="Block/IfStatement">if (<span class="marker" id="mapping-425"></span><span class="token non" id="move-dst-228" data-title="IfStatement/InfixExpression"><span class="marker" id="mapping-426"></span><span class="token non" id="move-dst-229" data-title="InfixExpression/MethodInvocation"><span class="marker" id="mapping-427"></span><span class="token non" id="move-dst-230" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-428"></span><span class="token non" id="move-dst-231" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">dir</span></span>.<span class="marker" id="mapping-429"></span><span class="token non" id="move-dst-232" data-title="MethodInvocation/SimpleName">getAvailableBytes</span>()</span> <span class="marker" id="mapping-430"></span><span class="token non" id="move-dst-233" data-title="InfixExpression/INFIX_EXPRESSION_OPERATOR">&gt;=</span> <span class="marker" id="mapping-431"></span><span class="token non" id="move-dst-234" data-title="InfixExpression/SimpleName">blockSize</span></span>) <span class="marker" id="mapping-432"></span><span class="token non" id="move-dst-235" data-title="IfStatement/Block">{
        <span class="marker" id="mapping-433"></span><span class="token non" id="move-dst-236" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-434"></span><span class="token non" id="move-dst-237" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-435"></span><span class="token non" id="move-dst-238" data-title="Assignment/SimpleName">candidateDir</span> <span class="marker" id="mapping-436"></span><span class="token non" id="move-dst-239" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-437"></span><span class="token non" id="move-dst-240" data-title="Assignment/SimpleName">dir</span></span>;</span>
      }</span></span>
    }</span></span></span>

    <span class="marker" id="mapping-438"></span><span class="token non" id="move-dst-241" data-title="Block/ReturnStatement">return <span class="marker" id="mapping-439"></span><span class="token non" id="move-dst-242" data-title="ReturnStatement/ConditionalExpression"><span class="marker" id="mapping-440"></span><span class="token non" id="move-dst-243" data-title="ConditionalExpression/InfixExpression"><span class="marker" id="mapping-441"></span><span class="token non" id="move-dst-244" data-title="InfixExpression/SimpleName">candidateDir</span> <span class="marker" id="mapping-442"></span><span class="token non" id="move-dst-245" data-title="InfixExpression/INFIX_EXPRESSION_OPERATOR">!=</span> <span class="marker" id="mapping-443"></span><span class="token non" id="move-dst-246" data-title="InfixExpression/NullLiteral">null</span></span> ? <span class="marker" id="mapping-444"></span><span class="token non" id="move-dst-247" data-title="ConditionalExpression/ClassInstanceCreation">new <span class="marker" id="mapping-445"></span><span class="token non" id="move-dst-248" data-title="ClassInstanceCreation/SimpleType"><span class="marker" id="mapping-446"></span><span class="token non" id="move-dst-249" data-title="SimpleType/SimpleName">TempBlockMeta</span></span>(<span class="marker" id="mapping-447"></span><span class="token non" id="move-dst-250" data-title="ClassInstanceCreation/SimpleName">userId</span>, <span class="marker" id="mapping-448"></span><span class="token non" id="move-dst-251" data-title="ClassInstanceCreation/SimpleName">blockId</span>, <span class="marker" id="mapping-449"></span><span class="token non" id="move-dst-252" data-title="ClassInstanceCreation/SimpleName">blockSize</span>, <span class="marker" id="mapping-450"></span><span class="token non" id="move-dst-253" data-title="ClassInstanceCreation/SimpleName">candidateDir</span>)</span>
        : <span class="marker" id="mapping-451"></span><span class="token non" id="move-dst-254" data-title="ConditionalExpression/NullLiteral">null</span></span>;</span>
  }</span></span>

  <span class="marker" id="mapping-452"></span><span class="token add" data-title="TypeDeclaration/MethodDeclaration"><span class="marker" id="mapping-453"></span><span class="token add" data-title="MethodDeclaration/Javadoc">/**
   * Find a directory in a tier that has max free space and is able to store the block.
   *
   * @param tier the storage tier
   * @param blockSize the size of block in bytes
   * @return the storage directory if found, null otherwise
   */</span>
  private <span class="marker" id="mapping-454"></span><span class="token add" data-title="MethodDeclaration/SimpleType">StorageDir</span> getCandidateDirInTier(<span class="marker" id="mapping-455"></span><span class="token add" data-title="MethodDeclaration/SingleVariableDeclaration">StorageTier tier</span>, <span class="marker" id="mapping-456"></span><span class="token add" data-title="MethodDeclaration/SingleVariableDeclaration">long blockSize</span>) <span class="marker" id="mapping-457"></span><span class="token add" data-title="MethodDeclaration/Block">{
    <span class="marker" id="mapping-458"></span><span class="token add" data-title="Block/VariableDeclarationStatement">StorageDir candidateDir = null;</span>
    <span class="marker" id="mapping-459"></span><span class="token mv" id="move-dst-82" data-title="Block/VariableDeclarationStatement"><span class="marker" id="mapping-460"></span><span class="token non" id="move-dst-83" data-title="VariableDeclarationStatement/PrimitiveType">long</span> <span class="marker" id="mapping-461"></span><span class="token non" id="move-dst-84" data-title="VariableDeclarationStatement/VariableDeclarationFragment"><span class="marker" id="mapping-462"></span><span class="token non" id="move-dst-85" data-title="VariableDeclarationFragment/SimpleName">maxFreeBytes</span> = <span class="marker" id="mapping-463"></span><span class="token add" data-title="VariableDeclarationFragment/InfixExpression"><span class="marker" id="mapping-464"></span><span class="token mv" id="move-dst-86" data-title="InfixExpression/SimpleName">blockSize</span> - 1</span></span>;</span>
    <span class="marker" id="mapping-465"></span><span class="token mm" gid="c" data-title="Block/EnhancedForStatement">for (<span class="marker" id="mapping-466"></span><span class="token non" id="move-dst-168" data-title="EnhancedForStatement/SingleVariableDeclaration"><span class="marker" id="mapping-467"></span><span class="token non" id="move-dst-169" data-title="SingleVariableDeclaration/SimpleType"><span class="marker" id="mapping-468"></span><span class="token non" id="move-dst-170" data-title="SimpleType/SimpleName">StorageDir</span></span> <span class="marker" id="mapping-469"></span><span class="token non" id="move-dst-171" data-title="SingleVariableDeclaration/SimpleName">dir</span></span> : <span class="marker" id="mapping-470"></span><span class="token non" id="move-dst-172" data-title="EnhancedForStatement/MethodInvocation"><span class="marker" id="mapping-471"></span><span class="token non" id="move-dst-173" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-472"></span><span class="token non" id="move-dst-174" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">tier</span></span>.<span class="marker" id="mapping-473"></span><span class="token non" id="move-dst-175" data-title="MethodInvocation/SimpleName">getStorageDirs</span>()</span>) <span class="marker" id="mapping-474"></span><span class="token non" id="move-dst-176" data-title="EnhancedForStatement/Block">{
      <span class="marker" id="mapping-475"></span><span class="token non" id="move-dst-177" data-title="Block/IfStatement">if (<span class="marker" id="mapping-476"></span><span class="token non" id="move-dst-178" data-title="IfStatement/InfixExpression"><span class="marker" id="mapping-477"></span><span class="token non" id="move-dst-179" data-title="InfixExpression/MethodInvocation"><span class="marker" id="mapping-478"></span><span class="token non" id="move-dst-180" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-479"></span><span class="token non" id="move-dst-181" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">dir</span></span>.<span class="marker" id="mapping-480"></span><span class="token non" id="move-dst-182" data-title="MethodInvocation/SimpleName">getAvailableBytes</span>()</span> <span class="marker" id="mapping-481"></span><span class="token mm updOnTop" gid="6" data-title="InfixExpression/INFIX_EXPRESSION_OPERATOR">&gt;</span> <span class="marker" id="mapping-482"></span><span class="token non" id="move-dst-183" data-title="InfixExpression/SimpleName">maxFreeBytes</span></span>) <span class="marker" id="mapping-483"></span><span class="token non" id="move-dst-184" data-title="IfStatement/Block">{
        <span class="marker" id="mapping-484"></span><span class="token non" id="move-dst-185" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-485"></span><span class="token non" id="move-dst-186" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-486"></span><span class="token non" id="move-dst-187" data-title="Assignment/SimpleName">maxFreeBytes</span> <span class="marker" id="mapping-487"></span><span class="token non" id="move-dst-188" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-488"></span><span class="token non" id="move-dst-189" data-title="Assignment/MethodInvocation"><span class="marker" id="mapping-489"></span><span class="token non" id="move-dst-190" data-title="MethodInvocation/METHOD_INVOCATION_RECEIVER"><span class="marker" id="mapping-490"></span><span class="token non" id="move-dst-191" data-title="METHOD_INVOCATION_RECEIVER/SimpleName">dir</span></span>.<span class="marker" id="mapping-491"></span><span class="token non" id="move-dst-192" data-title="MethodInvocation/SimpleName">getAvailableBytes</span>()</span></span>;</span>
        <span class="marker" id="mapping-492"></span><span class="token non" id="move-dst-193" data-title="Block/ExpressionStatement"><span class="marker" id="mapping-493"></span><span class="token non" id="move-dst-194" data-title="ExpressionStatement/Assignment"><span class="marker" id="mapping-494"></span><span class="token non" id="move-dst-195" data-title="Assignment/SimpleName">candidateDir</span> <span class="marker" id="mapping-495"></span><span class="token non" id="move-dst-196" data-title="Assignment/ASSIGNMENT_OPERATOR">=</span> <span class="marker" id="mapping-496"></span><span class="token non" id="move-dst-197" data-title="Assignment/SimpleName">dir</span></span>;</span>
      }</span></span>
    }</span></span>
    <span class="marker" id="mapping-497"></span><span class="token add" data-title="Block/ReturnStatement">return candidateDir;</span>
  }</span></span>
}</span>
</span></pre></div></div></div></body></html>